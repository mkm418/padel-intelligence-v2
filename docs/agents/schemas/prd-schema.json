{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ai-research-template/prd-schema.json",
  "title": "PRD Schema",
  "description": "Product Requirements Document schema for AI PM agent coordination",
  "type": "object",
  "required": ["meta", "problem", "goals", "personas", "functional_requirements", "acceptance_criteria"],
  "properties": {
    "meta": {
      "type": "object",
      "required": ["id", "title", "owner", "status", "created_at"],
      "properties": {
        "id": { "type": "string", "description": "Unique PRD identifier" },
        "title": { "type": "string" },
        "owner": { "type": "string", "description": "PM / product owner" },
        "status": { "type": "string", "enum": ["draft", "review", "approved", "in_progress", "shipped"] },
        "created_at": { "type": "string", "format": "date-time" },
        "updated_at": { "type": "string", "format": "date-time" },
        "stakeholders": {
          "type": "object",
          "properties": {
            "backend": { "type": "array", "items": { "type": "string" } },
            "frontend": { "type": "array", "items": { "type": "string" } },
            "qa": { "type": "array", "items": { "type": "string" } },
            "sre": { "type": "array", "items": { "type": "string" } },
            "data": { "type": "array", "items": { "type": "string" } },
            "design": { "type": "array", "items": { "type": "string" } }
          }
        }
      }
    },
    "problem": {
      "type": "object",
      "required": ["statement", "impact", "evidence"],
      "properties": {
        "statement": { "type": "string", "description": "1-2 sentence problem statement" },
        "impact": { "type": "string", "description": "Who is affected and how" },
        "evidence": { "type": "array", "items": { "type": "string" }, "description": "Data, feedback, or signals" }
      }
    },
    "goals": {
      "type": "object",
      "required": ["primary", "success_metrics"],
      "properties": {
        "primary": { "type": "array", "items": { "type": "string" }, "minItems": 1, "maxItems": 3 },
        "secondary": { "type": "array", "items": { "type": "string" } },
        "success_metrics": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["metric", "target", "measurement"],
            "properties": {
              "metric": { "type": "string" },
              "target": { "type": "string" },
              "measurement": { "type": "string" }
            }
          }
        }
      }
    },
    "non_goals": { "type": "array", "items": { "type": "string" }, "description": "Explicitly out of scope" },
    "personas": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "name", "description", "needs"],
        "properties": {
          "id": { "type": "string" },
          "name": { "type": "string" },
          "description": { "type": "string" },
          "needs": { "type": "array", "items": { "type": "string" } },
          "pain_points": { "type": "array", "items": { "type": "string" } }
        }
      }
    },
    "functional_requirements": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "description", "priority", "owner"],
        "properties": {
          "id": { "type": "string", "pattern": "^FR-[0-9]{2,3}$" },
          "description": { "type": "string" },
          "priority": { "type": "string", "enum": ["must", "should", "could"] },
          "owner": { "type": "string", "enum": ["backend", "frontend", "qa", "sre", "data", "design"] },
          "dependencies": { "type": "array", "items": { "type": "string" } },
          "ux_flow_id": { "type": "string" }
        }
      }
    },
    "acceptance_criteria": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id", "criterion", "fr_ids", "verifiable"],
        "properties": {
          "id": { "type": "string", "pattern": "^AC-[0-9]{2,3}$" },
          "criterion": { "type": "string" },
          "fr_ids": { "type": "array", "items": { "type": "string" } },
          "verifiable": { "type": "boolean" }
        }
      }
    }
  }
}

